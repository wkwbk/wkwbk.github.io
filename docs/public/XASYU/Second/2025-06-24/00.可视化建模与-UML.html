<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>可视化建模与-UML</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
      integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <style>
      /* 基本重置和页面背景 */
      body {
        background: #f0f0f0;
        margin: 0;
        padding: 0;
      }

      /* A4 页面容器样式 */
      .page {
        background: white;
        width: 210mm;
        min-height: 297mm;
        margin: 10mm auto;
        padding: 8mm; /* 极小的页边距 */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        box-sizing: border-box;
      }

      /* 页面内容的总容器 */
      .page-content {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 10px;
        line-height: 1.2;
        color: #333;
        /* 核心：三栏布局 */
        column-count: 3;
        column-gap: 5mm; /* 三栏之间的间距 */
        column-rule: 1px solid #eee; /* 三栏之间的分隔线 */
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        margin: 4px 0;
        padding: 0;
        break-after: avoid; /* 避免标题后分页或分栏 */
      }

      h2 {
        font-size: 14px;
        border-bottom: 1px solid #ccc;
        padding-bottom: 2px;
        margin-top: 5mm;
        column-span: all; /* 让大题号横跨所有列，作为明确的分割 */
      }
      h2:first-child {
        margin-top: 0;
      }
      h3 {
        font-size: 12px;
      }

      p,
      ul,
      ol,
      table {
        margin: 3px 0;
      }
      ul,
      ol {
        padding-left: 15px;
      }
      li {
        margin-bottom: 2px;
      }
      strong {
        font-weight: bold;
      }

      /* 使这些元素尽可能不被分页或分栏截断 */
      table,
      img {
        break-inside: avoid;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        font-size: 9px;
        margin: 5px 0;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 2px 4px;
        text-align: left;
        vertical-align: top;
      }
      th {
        background-color: #f2f2f2 !important;
        font-weight: bold;
      }
      img {
        max-width: 100%;
        height: auto;
        display: block;
        border: 1px solid #eee;
        margin: 4px auto;
      }

      /* 按钮容器样式 */
      .button-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        display: flex;
        gap: 10px;
      }

      /* 按钮通用样式 */
      .action-button {
        padding: 8px 16px;
        font-size: 14px;
        font-weight: bold;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s;
      }

      /* 各按钮颜色 */
      #print-button {
        background-color: #007bff;
      }
      #print-button:hover {
        background-color: #0056b3;
      }

      #download-button {
        background-color: #28a745;
      }
      #download-button:hover {
        background-color: #1e7e34;
      }

      #download-source-button {
        background-color: #ffc107;
        color: #212529;
      }
      #download-source-button:hover {
        background-color: #e0a800;
      }

      /* 打印专用样式 */
      @page {
        size: A4;
        margin: 0;
      }

      @media print {
        body {
          background: none;
        }
        .page {
          margin: 0;
          padding: 5mm; /* 打印时的真实边距 */
          box-shadow: none;
          width: 100%;
          min-height: 0; /* 打印时高度自适应 */
        }
        /* 关键：打印时不显示按钮容器 */
        .button-container {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="button-container">
      <button id="download-source-button" class="action-button" onclick="downloadSource()">💾 下载源码</button>
      <button id="print-button" class="action-button" onclick="window.print()">🖨️ 打印</button>
    </div>

    <div class="page" id="page-content-to-download">
      <div class="page-content">
        <h2>第一大题</h2>

        <h3>1.1</h3>
        <p><strong>“4+1”视图模型包含</strong>：</p>
        <ul>
          <li><strong>逻辑视图</strong>：关注系统的功能需求和静态结构（如类、对象、关系），描述系统提供什么功能。</li>
          <li><strong>开发视图</strong>：关注系统的静态组织结构（如模块、组件、包及其依赖关系），描述如何分解和构建软件。</li>
          <li><strong>进程视图</strong>：关注系统的动态行为、并发性、同步、通信（如进程、线程、活动图、顺序图），描述系统运行时的情况。</li>
          <li><strong>部署视图</strong>：关注系统的物理部署、硬件配置、网络拓扑（如节点、设备、连接），描述软件如何映射到硬件。</li>
          <li><strong>场景视图</strong>：整合其他视图，通过用例或场景（通常用用例图描述）展示系统如何满足用户需求，验证设计的有效性。</li>
        </ul>
        <p><strong>运用用例图构建预约实验课程业务的场景视图需经过以下步骤</strong>：识别参与者、提取用例、确定关系并绘制用例图。</p>
        <ul>
          <li><strong>识别参与者</strong>：主要有教师（发起预约请求）、实验员（审批预约申请）、学生（接收预约通知）、系统（处理资源冲突）。</li>
          <li><strong>核心用例</strong>：主要有浏览实验室空闲时段、浏览设备状态、提交预约申请、查看历史预约、审批预约申请、检查资源冲突、查看预约通知。</li>
        </ul>

        <h3>1.2</h3>
        <img src="https://lisir.me/assets/002.DsOple4Z.png" alt="补全后的用例图" />

        <h2>第二大题</h2>

        <h3>2.1</h3>
        <p><strong>依据业务需求描述抽象的方法有 4 个步骤</strong>：</p>
        <ol>
          <li><strong>识别核心实体对象</strong>：从业务流程中提取关键名词 (如设备、维修记录、报废申请)；</li>
          <li><strong>识别业务参与者</strong>：明确操作系统的角色 (如实验员、管理员)；</li>
          <li><strong>定义对象属性与方法</strong>：属性描述对象静态特征 (如设备编号、状态)，方法描述对象动态行为 (如更新状态、提交申请)；</li>
          <li><strong>建立对象间关系</strong>：如继承 (实验员→用户)，关联 (设备→维修记录)；</li>
        </ol>

        <h3>2.2</h3>
        <p>该业务涉及的类包括设备、用户、实验员（继承自用户）、管理员（继承自用户）、维修记录、报废申请、审批记录等。</p>
        <table>
          <thead>
            <tr>
              <th><strong>类</strong></th>
              <th><strong>主要属性</strong></th>
              <th><strong>主要方法</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>设备类</strong></td>
              <td><code>设备编号</code> <code>设备名称</code> <code>设备状态</code> <code>所属实验室编号</code></td>
              <td><code>更新状态()</code> <code>自动释放()</code></td>
            </tr>
            <tr>
              <td><strong>用户基类</strong></td>
              <td><code>用户 ID</code> <code>密码</code> <code>角色类型</code></td>
              <td><code>查询设备状态()</code></td>
            </tr>
            <tr>
              <td><strong>实验员类</strong></td>
              <td>（继承自用户基类的所有属性）</td>
              <td><code>登记维修()</code> <code>发起报废()</code></td>
            </tr>
            <tr>
              <td><strong>管理员类</strong></td>
              <td>（继承自用户基类的所有属性）</td>
              <td><code>审批报废()</code> <code>修改设备信息()</code></td>
            </tr>
            <tr>
              <td><strong>维修记录类</strong></td>
              <td><code>记录 ID</code> <code>设备编号</code> <code>维修原因</code> <code>处理结果</code></td>
              <td><code>完成维修()</code></td>
            </tr>
            <tr>
              <td><strong>报废申请类</strong></td>
              <td><code>申请单 ID</code> <code>设备编号</code> <code>审批状态</code></td>
              <td><code>通过审批()</code></td>
            </tr>
            <tr>
              <td><strong>审批记录类</strong></td>
              <td><code>审批 ID</code> <code>申请单 ID</code> <code>审批意见</code> <code>审批状态</code></td>
              <td><code>签署审批意⻅()</code> <code>更新审批状态()</code></td>
            </tr>
          </tbody>
        </table>
        <ul>
          <li><code>设备状态</code>：空闲/使用中/维修中/报废</li>
          <li><code>角色类型</code>：实验员/管理员</li>
          <li><code>审批状态</code>：待批准/已批准</li>
        </ul>

        <h3>2.3</h3>
        <img src="https://lisir.me/assets/003.D8jL1JYW.png" alt="类图" />

        <h2>第三大题</h2>

        <h3>3.1</h3>
        <img src="https://lisir.me/assets/005.Bky4hkOB.png" alt="补全后的顺序图" />

        <h3>3.2</h3>
        <img src="https://lisir.me/assets/006.CH0_VnYl.png" alt="设备状态机图" />

        <h2>第四大题</h2>

        <h3>4.1</h3>
        <p>根据 RUP 的理论框架，结合业务建模、需求分析、系统设计、实现与测试等核心工作流。</p>
        <p>实验室管理系统的开发过程需要设计以下 UML 模型来描述“实验教学实施环节”的业务逻辑：</p>
        <p><strong>业务建模阶段</strong>：主要描述业务流程与角色交互</p>
        <ul>
          <li><strong>用例图</strong>：定义“实验教学实施环节”的核心业务场景，识别参与者与系统功能的交互关系</li>
          <li><strong>活动图</strong>：描述“实验教学实施环节”中跨角色的业务活动顺序，通过泳道划分职责</li>
        </ul>
        <p><strong>需求分析阶段主</strong>：主要细化功能与规则</p>
        <ul>
          <li><strong>顺序图</strong>：按时间顺序展示“实验教学实施环节”中对象间的消息传递，聚焦交互细节</li>
          <li><strong>状态机图</strong>：描述“实验教学实施环节”中关键对象（如实验设备）的状态转换逻辑</li>
        </ul>
        <p><strong>系统设计阶段</strong>：主要将业务逻辑映射到技术实现</p>
        <ul>
          <li><strong>类图</strong>：定义“实验教学实施环节”涉及的业务实体类及其关系，如学生、设备及其之间的操作关系</li>
          <li><strong>组件图</strong>：描述实现“实验教学实施环节”功能的系统组件（如签到模块）及其依赖关系</li>
        </ul>

        <h3>4.2</h3>
        <img src="https://lisir.me/assets/007.2u6a6oj7.png" alt="实验启动环节活动图" />
      </div>
    </div>

    <script>
      // 下载 HTML 源代码功能
      function downloadSource() {
        // 获取完整的 HTML 内容
        const htmlContent = document.documentElement.outerHTML;
        // 创建一个 Blob 对象
        const blob = new Blob([htmlContent], { type: "text/html;charset=utf-8" });
        // 创建一个隐藏的 a 标签用于下载
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "可视化建模与-UML-源代码.html";
        // 触发点击
        document.body.appendChild(link);
        link.click();
        // 移除 a 标签
        document.body.removeChild(link);
        // 释放 URL 对象
        URL.revokeObjectURL(link.href);
      }
    </script>
  </body>
</html>
