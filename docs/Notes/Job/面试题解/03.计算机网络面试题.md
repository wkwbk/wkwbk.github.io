# 计算机网络面试题

::: details 常见的 HTTP 状态码有哪些？

HTTP 状态码是服务器对请求的响应结果，由三位数字组成，第一位数字定义了响应的类别。以下是一些最常见和重要的 HTTP 状态码：

- **1xx - 信息响应（Informational responses）：** 表示请求已被接收，继续处理。

  | 状态码  | 名称                | 描述                 | 常见应用场景                               |
  | ------- | ------------------- | -------------------- | ------------------------------------------ |
  | **100** | Continue            | 客户端应继续发送请求 | 大文件上传前，客户端检查服务器是否接受请求 |
  | **101** | Switching Protocols | 服务器已切换协议     | WebSocket 连接建立                         |

- **2xx - 成功响应（Successful responses）：** 表示请求已被成功接收、理解、接受。

  | 状态码  | 名称            | 描述                                                    | 常见应用场景                     |
  | ------- | --------------- | ------------------------------------------------------- | -------------------------------- |
  | **200** | OK              | 请求成功，最常见的状态码                                | 页面加载、API 请求成功           |
  | **201** | Created         | 请求已成功，并创建了新的资源                            | 创建用户、提交文章等 POST 请求   |
  | **202** | Accepted        | 请求已接受处理，但处理尚未完成                          | 异步处理，如排队任务             |
  | **204** | No Content      | 请求成功，但响应报文不含实体的主体部分                  | 删除操作、PUT 更新后无新内容返回 |
  | **206** | Partial Content | 客户端进行了范围请求，服务器成功执行了这部分的 GET 请求 | 文件断点续传、视频分段加载       |

- **3xx - 重定向（Redirection messages）：** 表示需要采取进一步操作才能完成请求。

  | 状态码  | 名称               | 描述                                                          | 常见应用场景                       |
  | ------- | ------------------ | ------------------------------------------------------------- | ---------------------------------- |
  | **301** | Moved Permanently  | 永久重定向。资源已永久地移动到新 URI                          | 网站域名变更、HTTP 到 HTTPS 重定向 |
  | **302** | Found              | 临时重定向。资源临时地移动到新 URI                            | 临时页面调整、负载均衡             |
  | **303** | See Other          | 告知客户端使用 GET 方法访问另一个 URI 来获取资源              | POST 请求后，引导用户查看结果页面  |
  | **304** | Not Modified       | 协商缓存命中。资源未修改，客户端可使用缓存版本                | 浏览器缓存优化                     |
  | **307** | Temporary Redirect | 临时重定向。与 302 类似，但要求客户端继续使用相同的 HTTP 方法 | 临时页面调整（保留方法）           |
  | **308** | Permanent Redirect | 永久重定向。与 301 类似，但要求客户端继续使用相同的 HTTP 方法 | 域名变更（保留方法）               |

- **4xx - 客户端错误（Client error responses）：** 表示客户端发送的请求包含错误或无法完成。

  | 状态码  | 名称                   | 描述                                                     | 常见应用场景                         |
  | ------- | ---------------------- | -------------------------------------------------------- | ------------------------------------ |
  | **400** | Bad Request            | 客户端请求有语法错误，不能被服务器理解                   | 请求参数错误、格式不正确             |
  | **401** | Unauthorized           | 请求需要用户认证                                         | 访问受保护资源未提供认证信息         |
  | **403** | Forbidden              | 服务器已理解请求，但拒绝执行（通常是权限问题）           | 无权访问、IP 被禁止                  |
  | **404** | Not Found              | 请求的资源不存在。最常见的错误状态码                     | URL 路径错误、资源已被删除           |
  | **405** | Method Not Allowed     | 请求方法（如 GET, POST）不被允许用于请求的资源           | 对不支持 POST 的接口发送 POST 请求   |
  | **408** | Request Timeout        | 客户端在服务器等待请求时，没有在允许的时间内完成发送请求 | 客户端网络问题，请求发送超时         |
  | **409** | Conflict               | 请求与服务器的当前状态冲突                               | 并发修改冲突（如乐观锁）、资源已存在 |
  | **413** | Payload Too Large      | 请求的实体过大，服务器无法处理                           | 上传文件过大                         |
  | **415** | Unsupported Media Type | 请求的媒体类型（Content-Type）不被服务器支持             | 发送了服务器不支持的 Content-Type    |
  | **429** | Too Many Requests      | 客户端在给定时间内发送了太多请求（速率限制）             | 短时间内大量请求，被服务器限流       |

- **5xx - 服务器错误（Server error responses）：** 表示服务器在尝试处理请求时发生了错误。

  | 状态码  | 名称                  | 描述                                                                   | 常见应用场景                     |
  | ------- | --------------------- | ---------------------------------------------------------------------- | -------------------------------- |
  | **500** | Internal Server Error | 服务器遇到了一个意外情况，阻止其完成请求。最常见的服务器端错误         | 后端代码错误、服务器配置问题     |
  | **501** | Not Implemented       | 服务器不支持请求的功能，无法完成请求                                   | 请求了服务器未实现的 API         |
  | **502** | Bad Gateway           | 作为网关或代理工作的服务器收到了上游服务器的无效响应                   | 网关与后端服务通信失败           |
  | **503** | Service Unavailable   | 服务器目前无法处理请求，通常是由于服务器过载或停机维护                 | 服务器维护、流量高峰导致服务崩溃 |
  | **504** | Gateway Timeout       | 作为网关或代理工作的服务器未能及时从上游服务器或某些辅助服务器接收响应 | 网关等待后端服务响应超时         |

:::

::: details HTTP 请求包含哪些内容，请求头和请求体有哪些类型？

HTTP 请求由三个主要部分组成：

- **请求行 (Request Line)**：包含**请求方法**、**请求 URI** 和 **HTTP 协议版本**。`GET /index.html HTTP/1.1`
- **请求头 (Request Headers)**：包含客户端环境信息、请求体信息、认证信息等。键值对形式。
- **空行 (Blank Line)**：用于分隔请求头和请求体。
- **请求体 (Request Body)**：包含客户端发送给服务器的数据，通常在 POST、PUT 等方法中出现。

**请求头 (Request Headers) 的类型**

请求头包含各种元数据，用于描述请求的上下文。一些常见的请求头类型：

- **通用头 (General Headers)**：既可用于请求又可用于响应，例如
  - `Connection: keep-alive` (保持连接)
  - `Cache-Control: no-cache` (不使用缓存)
- **请求头 (Request Headers)**：仅用于请求，提供更多关于请求或客户端的信息，例如
  - `Host: www.example.com` (请求的目标主机)
  - `User-Agent: Mozilla/5.0 (...)` (客户端代理信息，通常是浏览器信息)
  - `Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8` (客户端可接受的媒体类型)
  - `Accept-Language: zh-CN,zh;q=0.8` (客户端可接受的语言)
  - `Accept-Encoding: gzip, deflate, sdch` (客户端可接受的编码方式)
  - `Cookie: key=value` (客户端发送给服务器的 Cookie)
  - `Referer: http://www.example.com/previous-page.html` (请求的来源页面)
  - `Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==` (认证信息，如 Basic Auth, Bearer Token)
  - `If-Modified-Since: Tue, 15 Nov 1994 12:45:26 GMT` (用于条件请求，协商缓存)
- **实体头 (Entity Headers)**：描述请求体或响应体的资源信息，例如
  - `Content-Type: application/json` (请求体的媒体类型)
  - `Content-Length: 123` (请求体的字节长度)

**请求体 (Request Body) 的类型**

请求体用于承载客户端需要发送给服务器的数据。其类型主要由 `Content-Type` 请求头指定。常见的请求体类型包括：

1. **`application/x-www-form-urlencoded`:**
    - **描述**：最常见的表单提交方式。数据被编码成键值对，用 `&` 分隔，键和值之间用 `=` 连接，特殊字符会被编码。
    - **示例**：`name=Alice&age=30`
    - **场景**：传统的 HTML 表单 `method="POST"` 且不指定 `enctype` 时的默认类型。

2. **`multipart/form-data`:**
    - **描述**：用于提交包含文件（二进制数据）的表单。每个表单字段或文件都被分成独立的部分（part），用一个分隔符（boundary）隔开。
    - **示例:**

      ```txt
      Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
      ------WebKitFormBoundary7MA4YWxkTrZu0gW
      Content-Disposition: form-data; name="username"

      Alice
      ------WebKitFormFormBoundary7MA4YWxkTrZu0gW
      Content-Disposition: form-data; name="profile_picture"; filename="me.jpg"
      Content-Type: image/jpeg

      ... (binary image data) ...
      ------WebKitFormBoundary7MA4YWxkTrZu0gW--
      ```

    - **场景**：HTML 表单 `method="POST"` 且 `enctype="multipart/form-data"` 时，常用于文件上传。

3. **`application/json`:**
    - **描述**：以 JSON 格式传输数据。这是现代 Web API 和前后端分离应用中最常用的数据交换格式。
    - **示例**：`{"name": "Bob", "age": 25}`
    - **场景**：RESTful API 调用，前端（如 React, Vue, Angular）通过 AJAX/Fetch 发送数据到后端。

4. **`text/plain`:**
    - **描述**：纯文本数据，不进行任何特殊编码或格式化。
    - **示例**：`Hello, this is plain text.`
    - **场景**：不常用，有时用于发送简单的文本信息，或者调试。

5. **`application/xml` 或 `text/xml`:**
    - **描述**：以 XML 格式传输数据。在某些传统企业级应用或 SOAP 服务中仍有使用。
    - **示例**：`<user><name>Charlie</name><age>35</age></user>`
    - **场景**：老旧的 Web Service (SOAP)。

6. **二进制数据 (Binary Data):**
    - **描述**：直接传输原始的二进制数据，没有特定的结构，`Content-Type` 会是具体的媒体类型，如 `image/jpeg`, `audio/mpeg`, `application/octet-stream` (通用二进制流)。
    - **示例**：直接的图片、音频、视频文件内容。
    - **场景**：直接上传文件内容，而不是通过 `multipart/form-data` 封装。

:::

::: details HTTP 中 GET 和 POST 的区别是什么？

GET 和 POST 是 HTTP 协议中最常用的两种请求方法，它们在语义、用途、数据传输方式、安全性等方面存在显著区别：

| 特性              | GET 请求                                                                                                                        | POST 请求                                                                                                            |
| :---------------- | :------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------- |
| **语义/用途**     | **获取/检索** 资源。通常用于从服务器请求数据。                                                                                  | **提交/创建/更新** 资源。通常用于向服务器发送数据以进行处理。                                                        |
| **幂等性**        | **幂等**：多次请求同一个 GET URL，只要资源未改变，结果都是相同的，不会对服务器状态造成副作用。                                  | **非幂等**：多次提交相同的 POST 请求可能会导致不同的结果（例如，每次提交都会创建新的资源）。                         |
| **安全性**        | **不安全**：不是指数据加密，而是数据以明文显示在 URL 中，容易被浏览器历史记录、服务器日志、代理服务器缓存。不适合传输敏感信息。 | **相对安全**：数据放在请求体中，URL 中不显示，因此不会被浏览器历史记录、服务器日志直接记录，但数据本身也不是加密的。 |
| **可见性**        | 参数通过 **URL 的查询字符串** 传输，在地址栏可见。                                                                              | 参数通过 **请求体** 传输，在地址栏不可见。                                                                           |
| **数据长度限制**  | **有限制**：URL 的长度通常有浏览器和服务器的限制（通常在 2KB - 8KB 之间）。                                                     | **无限制**：请求体的大小理论上没有限制，只受服务器处理能力和内存的限制。                                             |
| **缓存**          | **可以缓存**：浏览器和代理服务器可以缓存 GET 请求的响应，以提高性能。                                                           | **不能缓存**：POST 请求的响应默认不能被缓存。                                                                        |
| **历史记录/收藏** | **可以收藏/添加到书签**：因为请求参数包含在 URL 中。                                                                            | **不能收藏/添加到书签**：因为请求体中的数据不会被保存。                                                              |
| **回退/刷新**     | 回退和刷新页面无副作用。                                                                                                        | 回退或刷新页面时，浏览器通常会提示用户是否重新提交表单，因为重复提交可能导致副作用。                                 |

**总结：**

- **GET** 主要用于**获取**数据，不应改变服务器状态，数据放在 URL 中。适合查询、获取列表、查看详情等操作。
- **POST** 主要用于**提交**数据，通常会改变服务器状态（如创建新用户、提交订单），数据放在请求体中。适合创建、更新、删除等操作。

:::
